{"version":3,"sources":["../../server/db/queries.js"],"names":["user","insert","selectAll","selectByEmail","selectById","delete","message","updateStatusUnread","updateStatusRead","updateStatusDraft","selectAllReceived","selectAllCategory","selectAllDrafts","selectAllSent","inboxQuery","sentQuery","selectByIdJoinUser","selectReceiver","selectUser","deleteReceived","deleteAllReceived","deleteSent","verifyQuery","group","updateGroup","selectGroupMembers","selectByGroupId","selectByOwner","deleteUser","deleteGroupUsers","deleteGroup"],"mappings":";;;;;;AAAA,MAAMA,IAAI,GAAG;AACXC,EAAAA,MAAM,EAAE,wHADG;AAEXC,EAAAA,SAAS,EAAE,qBAFA;AAGXC,EAAAA,aAAa,EAAE,sCAHJ;AAIXC,EAAAA,UAAU,EAAE,wCAJD;AAKXC,EAAAA,MAAM,EAAE;AALG,CAAb;;AAQA,MAAMC,OAAO,GAAG;AACdL,EAAAA,MAAM,EAAG;iDADK;AAIdM,EAAAA,kBAAkB,EAAE,oFAJN;AAKdC,EAAAA,gBAAgB,EAAE,gFALJ;AAMdC,EAAAA,iBAAiB,EAAE,4DANL;AAOdC,EAAAA,iBAAiB,EAAG;;;;yFAPN;AAadC,EAAAA,iBAAiB,EAAG;;;;kGAbN;AAmBdC,EAAAA,eAAe,EAAG;;;;8FAnBJ;AAyBdC,EAAAA,aAAa,EAAG;;;;wGAzBF;AA+BdC,EAAAA,UAAU,EAAE,6DA/BE;AAgCdC,EAAAA,SAAS,EAAE,4DAhCG;AAiCdX,EAAAA,UAAU,EAAE,6CAjCE;AAkCdY,EAAAA,kBAAkB,EAAG;;oEAlCP;AAsCdC,EAAAA,cAAc,EAAE,uDAtCF;AAuCdC,EAAAA,UAAU,EAAE,4CAvCE;AAwCdC,EAAAA,cAAc,EAAE,8DAxCF;AAyCdC,EAAAA,iBAAiB,EAAE,yCAzCL;AA0CdC,EAAAA,UAAU,EAAE,6DA1CE;AA2CdC,EAAAA,WAAW,EAAG;;;AA3CA,CAAhB;;AAgDA,MAAMC,KAAK,GAAG;AACZtB,EAAAA,MAAM,EAAE,gFADI;AAEZuB,EAAAA,WAAW,EAAE,yEAFD;AAGZN,EAAAA,UAAU,EAAE,gEAHA;AAIZO,EAAAA,kBAAkB,EAAG;;4DAJT;AAQZC,EAAAA,eAAe,EAAE,0CARL;AASZC,EAAAA,aAAa,EAAE,0CATH;AAUZC,EAAAA,UAAU,EAAE,8DAVA;AAWZC,EAAAA,gBAAgB,EAAE,2CAXN;AAYZC,EAAAA,WAAW,EAAE;AAZD,CAAd","sourcesContent":["const user = {\n  insert: 'INSERT INTO users (email, first_name, last_name, password, is_admin, photo) VALUES($1, $2, $3, $4, $5, $6) returning *',\n  selectAll: 'SELECT * FROM users',\n  selectByEmail: 'SELECT * FROM users WHERE email = $1',\n  selectById: 'SELECT * FROM users WHERE user_id = $1',\n  delete: 'DELETE FROM users WHERE user_id = $1',\n};\n\nconst message = {\n  insert: `INSERT INTO messages(created_at, subject, message, sender_id, receiver_id, parent_msg_id, status )\n\t\tVALUES($1, $2, $3, $4, $5, $6, $7) returning *`,\n\n  updateStatusUnread: 'UPDATE messages SET status=\\'unread\\' WHERE receiver_id = $1 AND status = \\'sent\\'',\n  updateStatusRead: 'UPDATE messages SET status=\\'read\\' WHERE receiver_id = $1 AND message_id = $2',\n  updateStatusDraft: 'UPDATE messages SET status=\\'draft\\' WHERE message_id = $1',\n  selectAllReceived: `SELECT DISTINCT I.receiver_id, M.message_id, M.sender_id, M.subject, M.message, M.parent_msg_id, M.status, M.created_at, U.photo\n\t\tFROM inbox I \n    INNER JOIN messages M USING(message_id) \n    INNER JOIN users U ON (M.sender_id = U.user_id) \n    WHERE I.receiver_id = $1 AND I.receiver_id != M.sender_id ORDER BY M.message_id DESC`,\n\n  selectAllCategory: `SELECT DISTINCT I.receiver_id, M.message_id, M.sender_id, M.subject, M.message, M.parent_msg_id, M.status, M.created_at, U.photo\n    FROM inbox I\n    INNER JOIN messages M USING(receiver_id)\n    INNER JOIN users U ON (M.sender_id = U.user_id) \n    WHERE receiver_id = $1 AND status=$2 AND I.message_id=M.message_id ORDER BY M.message_id DESC`,\n\n  selectAllDrafts: `SELECT DISTINCT O.sender_id, M.message_id, M.subject, M.message, M.receiver_id, M.status, U.email\n\t\tFROM outbox O \n\t\tINNER JOIN messages M USING(sender_id) \n\t\tFULL OUTER JOIN users U ON(M.receiver_id = U.user_id) \n\t\tWHERE sender_id = $1 AND status=$2 AND O.message_id=M.message_id ORDER BY M.message_id DESC`,\n\n  selectAllSent: `SELECT DISTINCT O.sender_id, M.message_id, M.subject, M.message, M.parent_msg_id, M.status, M.created_at, U.photo\n\t\tFROM outbox O \n\t\tINNER JOIN messages M USING(sender_id)\n    INNER JOIN users U ON (M.sender_id = U.user_id)\n    WHERE sender_id = $1 AND O.message_id=M.message_id AND status != 'draft' ORDER BY M.message_id DESC`,\n\n  inboxQuery: 'INSERT INTO inbox (receiver_id, message_id) VALUES ($1, $2)',\n  sentQuery: 'INSERT INTO outbox (sender_id, message_id) VALUES ($1, $2)',\n  selectById: 'SELECT * FROM messages WHERE message_id =$1',\n  selectByIdJoinUser: `SELECT M.message_id, M.sender_id, M.subject, M.message, M.parent_msg_id, M.status, M.created_at, U.email, U.first_name, U.last_name \n\t\tFROM messages M \n\t\tINNER JOIN users U ON M.sender_id = U.user_id AND message_id = $1`,\n\n  selectReceiver: 'SELECT receiver_id FROM messages WHERE message_id =$1',\n  selectUser: 'SELECT user_id FROM users WHERE email = $1',\n  deleteReceived: 'DELETE FROM inbox WHERE receiver_id = $1 AND message_id = $2',\n  deleteAllReceived: 'DELETE FROM inbox WHERE message_id = $1',\n  deleteSent: 'DELETE FROM outbox WHERE sender_id = $1 AND message_id = $2',\n  verifyQuery: `SELECT M.message_id, O.sender_id, I.receiver_id FROM messages M \n    FULL OUTER JOIN outbox O ON(M.message_id=O.message_id) \n    FULL OUTER JOIN inbox I ON(M.message_id=I.message_id) WHERE M.message_id=$1`,\n};\n\nconst group = {\n  insert: 'INSERT INTO groups(name, description, owner_id) VALUES($1, $2, $3) returning *',\n  updateGroup: 'UPDATE groups SET name=$1, description=$2 WHERE group_id=$3 returning *',\n  selectUser: 'SELECT * FROM group_users WHERE group_id = $1 AND user_id = $2',\n  selectGroupMembers: `SELECT DISTINCT G.user_id, U.email, U.first_name, U.last_name \n\t\tFROM group_users G \n    INNER JOIN users U USING(user_id) WHERE G.group_id = $1`,\n    \n  selectByGroupId: 'SELECT * FROM groups WHERE group_id = $1',\n  selectByOwner: 'SELECT * FROM groups WHERE owner_id = $1',\n  deleteUser: 'DELETE FROM group_users WHERE group_id = $1 AND user_id = $2',\n  deleteGroupUsers: 'DELETE FROM group_users WHERE group_id=$1',\n  deleteGroup: 'DELETE FROM groups WHERE group_id=$1',\n};\n\nexport { user, message, group };\n"],"file":"queries.js"}